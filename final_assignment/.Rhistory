date[1]
year[1]
temp[100]
year[100]
temp = as.Date(airline$Date,'%m/%d/%Y')
airline['Date'] = format(temp,'%Y')
print(head(airline))
year = format(temp,'%Y')
aggregate(Date, airline , count)
aggregate('Date', airline , count)
aggregate('Date', airline , sum)
aggregate(airline, by=list(airline$Date)
)
aggregate(airline, by=list(airline$Date),  FUN=mean)
aggregate(airline$Fatalities, by=list(airline$Date),  FUN=mean)
selection = airlines[airlines$Classification=="Non Military",]
selection = airline[airline$Classification=="Non Military",]
selection
aggregate(airline, by=list(airline$Date),  FUN=table)
aggregate(airline$Fatalities, by=list(airline$Date),  FUN=mean)
aggregate(airline$Fatalities, by=list(airline$Date),  FUN=table)
aggregate(airline$Fatalities, by=list(airline$Date),  FUN=count)
aggregate(airline$Fatalities, by=list(airline$Date),  FUN=length)
list = aggregate(airline$Fatalities, by=list(airline$Date),  FUN=length)
air['Fatalities'][!is.na(air$Fatalities)] = 0
airlines['Fatalities'][!is.na(airlines$Fatalities)] = 0
airline['Fatalities'][!is.na(airline$Fatalities)] = 0
airline['Fatalities'][!is.na(airline$Fatalities)] <- 0
airline[!is.na(airline$Fatalities)] <- 0
airline$Fatalities[is.na(airline$Fatalities)] <- 0
airline$Fatalities
list = aggregate(airline$Fatalities, by=list(airline$Date),  FUN=length)
max(list)
list
which.max(list['x'])
list['x']
typeof(list['x'])
max(list['x'])
which.max(list['x'])
rank(list,ties.method="max"))
rank(list,ties.method="max")
rank(list['x'],ties.method="max")
Ordering[list, -1]
which.max(list['x'])
which.max(list['x'])
which.max(list$x)
which.max(list[x])
typeof(list$x)
which.max(list[x])
which.max(list$x)
list[61]
list['year'][61]
list[Year'][61]
''
list['Year'][61]
names(list)
list['Group.1'][61]
list$Group.1
list$Group.1[61]
list['Group.1'][61]
list
names(airlines)
names(airline)
unique(airline$Operator[airline$Date == 1972])
unique(selection$Operator[selection$Date == 1972])
unique(selection$Operator)
unique(selection$Operator[selection$Date == 1972])
unique(selection['Operator'][selection$Date == 1972])
names(airline)
unique(selection['Operator'][selection$Date == 1972])
names(operator)
names(selection)
selection['Operator']
unique(selection['Operator'])
unique(selection['Operator'][0])
unique(selection['Operator'][1])
selection['Operator'][1]
selection['Operator'][2]
selection$Operator[1]
length(selection$Operator)
length(unique(selection$Operator))
length(unique(selection['Operator'][selection$Date == 1972]))
length(unique(selection$Operator[selection$Date == 1972]))
list = aggregate(selection$Fatalities, by=list(selection$Date),  FUN=length)
which.max(list[x])
which.max(list$x)
list[Year'][56]
''
list['Year'][56]
list['Group.1'][56]
list(names)
names(list)
list$Group.1[56]
list
length(list$Group.1 == 1972)
length(selection$Date == 1972)
length(selection$Date[selection$Date == 1972])
length(selection$Date[selection$Date == 2009])
sort(selection$Date)
nrow(selection)
nrow(selection$Date)
nrow(airlines)
nrow(airline)
nrow(airline$Classification == "Non Military")
length(airline$Classification[airline$Classification == "Non Military"])
airline$Date[is.na(airline$Date)]
selection$Date[is.na(selection$Date)]
length(selection$Date[selection$Date == 1972])
### Analysis of data
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14)
rep(0, 3)
### Analysis of data
function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
df <- data.frame(airlines, before, after)
#for(i in airlines){
#  append(x, values, after=length(x))
#}
#statements
#return(something)
}
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
df <- data.frame(airlines, before, after)
#for(i in airlines){
#  append(x, values, after=length(x))
#}
#statements
#return(something)
}
setup_data(1972, 5, airline)
setup_data(1972, 5, airline)
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
df <- data.frame(airlines, before, after)
#for(i in airlines){
#  append(x, values, after=length(x))
#}
#statements
#return(something)
return(df)
}
setup_data <- function(date, range, data) {
s
cwlvcm
}
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
df <- data.frame(airlines, before, after)
#for(i in airlines){
#  append(x, values, after=length(x))
#}
#statements
#return(something)
return(df)
}
setup_data(1972, 5, airline)
(i in seq(from=1, to=78, by=2))
i in seq(from=1, to=78, by=2)
seq(from=1, to=78, by=2)
name(airlines)
name(airline)
names(airline)
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date > lower_bound && data$Date <= date &&
data$airlines = df$airlines[i]])
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date > lower_bound && data$Date <= date &&
data$airlines == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound && data$Date > date &&
data$airlines == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data(1972, 5, section)
setup_data(1972, 5, airline)
date = 1972
range = 5
data = airline
sum(data$Fatalities[data$Date > lower_bound && data$Date <= date &&
data$airlines == RAM])
lower_bound = date + 5
lower_bound = date - 4
upper_bound = date + 5
sum(data$Fatalities[data$Date > lower_bound && data$Date <= date &&
data$airlines == RAM])
sum(data$Fatalities[&& data$Date <= date &&
data$airlines == RAM])
sum(data$Fatalities[data$Date <= date &&
data$airlines == RAM])
sum(data[data$Date <= date &&
data$airlines == RAM])
data[data$Date <= date && data$airlines == RAM]
data[data$Date <= date && data$airlines == "RAM"]
data[data$airlines == "RAM"]
data[data$Operator == "RAM"]
data[data$Operator == "RAM"]
names(data)
data$Fatalities[data$Operator == "RAM"]
data$Fatalities[data$Operator == "RAM" && data$Date = 1972 ]
data$Fatalities[data$Operator == "RAM" && data$Date == 1972 ]
data$Fatalities[data$Date == 1972 ]
data$Operator[data$Date == 1972 ]
data$Fatalities[data$Operator == "Spantax" && data$Date = 1972 ]
data$Fatalities[data$Operator == "Spantax" && data$Date == 1972 ]
data$Fatalities[data$Operator == "Spantax" & data$Date == 1972 ]
data$Fatalities[data$Operator == "Spantax" & data$Date <= 1972 ]
data$Fatalities[data$Operator == "Spantax" & data$Date <= 1972 ][0]
data$Fatalities[data$Operator == "Spantax" & data$Date <= 1972 ][1]
data$Fatalities[data$Operator == "Spantax" & data$Date <= 1972 ][2]
data$Fatalities[data$Operator == "Spantax" & data$Date <= 1972 ][3]
setup_data(1972, 5, airline)
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date > lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data(1972, 5, airline)
data$Fatalities[data$Operator == "Garuda  Indonesia Airlines" & data$Date <= 1972 ]
data$Fatalities[data$Operator == "Garuda  Indonesia Airlines" & data$Date == 1972 ]
data$Fatalities[data$Operator == "Garuda  Indonesia Airlines" & data$Date <= 1972 ]
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator[data$Date == date])
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date > lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data <- function(date, range, data) {
}
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator[data$Date == date])
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date > lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data(date, range, data)
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date >= lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data <- function(date, range, data) {
}
### Analysis of data
setup_data <- function(date, range, data) {
airlines = unique(data$Operator)
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - 4
upper_bound = date + 5
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date >= lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
#append(x, values, after=length(x))
}
#statements
#return(something)
return(df)
}
setup_data(date, range, data)
airlines_data = read.csv("data/airline_data.csv", header=TRUE)
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military"]
names(airlines_data)
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military"]
airlines_data$Classification
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military",]
temp = as.Date(airlines_selection_data$Date,'%m/%d/%Y')
airlines_selection_data['Date'] = format(temp,'%Y')
names(airline_selection_data)
names(airline_selection_data)
airlines_data = read.csv("data/airline_data.csv", header=TRUE)
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military",]
temp = as.Date(airlines_selection_data$Date,'%m/%d/%Y')
airlines_selection_data['Date'] = format(temp,'%Y')
names(airline_selection_data)
names(airlines_selection_data)
aggregate_data = setup_data(1965, 5, airlines_selection_data)
hist(airlines_selection_data$Fatalities)
airlines_data = read.csv("data/airline_data.csv", header=TRUE)
hist(airlines_data$Fatalities)
par(mfrow=c(1,2))
hist(airlines_data$Fatalities)
qqnorm(airlines_data$Fatalities)
airlines_data = read.csv("data/airline_data.csv", header=TRUE)
par(mfrow=c(1,2))
hist(airlines_data$Fatalities)
qqnorm(airlines_data$Fatalities)
par(mfrow=c(1,2))
hist(airlines_data$Fatalities)
qqnorm(airlines_data$Fatalities)
par(mfrow=c(1,2))
hist(airlines_data$Fatalities)
qqnorm(airlines_data$Fatalities)
aggregate_data = setup_data(1965, 5, airlines_selection_data)
setup_data <- function(date, range, data) {
airlines = unique(data$Operator[data$Date == date])#remove filter to include airlines that didn't crash
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - range - 1
upper_bound = date + range
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date >= lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
}
return(df)
}
aggregate_data = setup_data(1965, 5, airlines_selection_data)
airlines_data = read.csv("data/airline_data.csv", header=TRUE)
par(mfrow=c(1,2))
hist(airlines_data$Fatalities)
qqnorm(airlines_data$Fatalities)
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military",]
temp = as.Date(airlines_selection_data$Date,'%m/%d/%Y')
airlines_selection_data['Date'] = format(temp,'%Y')
airlines_selection_data = airlines_data[airlines_data$Classification == "Non Military",]
temp = as.Date(airlines_selection_data$Date,'%m/%d/%Y')
airlines_selection_data['Date'] = format(temp,'%Y')
setup_data <- function(date, range, data) {
airlines = unique(data$Operator[data$Date == date])#remove filter to include airlines that didn't crash
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - range - 1
upper_bound = date + range
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date >= lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
}
return(df)
}
aggregate_data = setup_data(1965, 5, airlines_selection_data)
permutation_test(aggregate_data, 'Before', 'After')
setup_data <- function(date, range, data) {
airlines = unique(data$Operator[data$Date == date])#remove filter to include airlines that didn't crash
before = rep(0, length(airlines))
after = rep(0, length(airlines))
lower_bound = date - range - 1
upper_bound = date + range
df <- data.frame(airlines, before, after)
for(i in seq(from=1, to=length(airlines), by=1)){
df$before[i] = sum(data$Fatalities[data$Date >= lower_bound & data$Date <= date &
data$Operator == df$airlines[i]])
df$after[i] = sum(data$Fatalities[data$Date <= upper_bound & data$Date > date &
data$Operator == df$airlines[i]])
}
return(df)
}
permutation_test = function(mystat, col1, col2){
B=1000
tstar=numeric(B)
for (i in 1:B){
temp=t(apply(cbind(col1,col2),1,sample))
tstar[i]=mystat(temp[,1],temp[,2])
}
myt=mystat(col1,col2)
print(myt)
pl=sum(tstar<myt)/B
pr=sum(tstar>myt)/B
p=2*min(pl,pr)
print(p)
}
permutation_test(aggregate_data, 'Before', 'After')
aggregate_data = setup_data(1965, 5, airlines_selection_data)
permutation_test(aggregate_data, 'Before', 'After')
aggregate_data = setup_data(1965, 5, airlines_selection_data)
permutation_test(aggregate_data, 'Before', 'After')
permutation_test(aggregate_data, 'Before', 'After')
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$Before, aggregate_data$After)
print(length(aggrgate_data$Before))
print(length(aggregate_data$Before))
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$Before, aggregate_data$After)
print(length(aggregate_data$before))
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$before, aggregate_data$after)
aggregate_data = setup_data(1975, 5, airlines_selection_data)
print(length(aggregate_data$before))
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$before, aggregate_data$after)
aggregate_data = setup_data(1965, 5, airlines_selection_data)
print(length(aggregate_data$before))
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$before, aggregate_data$after)
aggregate_data = setup_data(1985, 5, airlines_selection_data)
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$before, aggregate_data$after)
aggregate_data = setup_data(2004, 5, airlines_selection_data)
mystat=function(x,y) {mean(x-y)}
permutation_test(mystat=function(x,y) {mean(x-y)}, aggregate_data$before, aggregate_data$after)
airline=read.csv("data/airline-safety.csv", header=TRUE)
attach(airline)
head(airline)
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14)
boxplot(airline$fatal_accidents_85_99, airline$fatal_accidents_00_14)
boxplot(airline$fatalities_85_99, airline$fatalities_00_14)
par(mfrow=c(1,3))
boxplot(airline['incidents_85_99'], airline['incidents_00_14'], title="Indicents")
boxplot(airline$fatal_accidents_85_99, airline$fatal_accidents_00_14)
boxplot(airline$fatalities_85_99, airline$fatalities_00_14)
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14, names=c(“1985-1999“,“2000-2014“))
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14, names=c("1985-1999","2000-2014"))
boxplot(airline$fatal_accidents_85_99, airline$fatal_accidents_00_14)
boxplot(airline$fatalities_85_99, airline$fatalities_00_14)
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14, names=c("1985-1999","2000-2014"))
boxplot(airline$fatal_accidents_85_99, airline$fatal_accidents_00_14, names=c("1985-1999","2000-2014"))
boxplot(airline$fatalities_85_99, airline$fatalities_00_14, names=c("1985-1999","2000-2014"))
par(mfrow=c(1,3))
boxplot(airline$incidents_85_99, airline$incidents_00_14, names=c("1985-1999","2000-2014"), ylab ="Incidents", xlab ="Years")
boxplot(airline$fatal_accidents_85_99, airline$fatal_accidents_00_14, names=c("1985-1999","2000-2014"), ylab ="Accidents", xlab ="Years")
boxplot(airline$fatalities_85_99, airline$fatalities_00_14, names=c("1985-1999","2000-2014"), ylab ="Fatalities", xlab ="Years")
airline=read.csv("data/airline-safety.csv", header=TRUE)
attach(airline)
print(names(airline))
aggregate_data = setup_data(1965, 5, airlines_selection_data)
